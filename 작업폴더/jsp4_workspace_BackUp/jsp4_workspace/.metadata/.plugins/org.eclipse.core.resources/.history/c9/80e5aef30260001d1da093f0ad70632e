package com.shinnaHotel.reservation;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.shinnaHotel.DAO.ReservationDAO;
import com.shinnaHotel.DTO.ResCancelDTO;
import com.shinnaHotel.action.Action;
import com.shinnaHotel.action.ActionForward;

public class ReservationCancelAction implements Action{
	// 예약 취소하기
	@Override
	public ActionForward execute(HttpServletRequest req, HttpServletResponse resp) {
		ActionForward forward = new ActionForward();
		
		ReservationDAO rdao = new ReservationDAO();
		ResCancelDTO rcdto = new ResCancelDTO();
		
		int res_number = Integer.parseInt(req.getParameter("res_number"));
		HttpSession session = req.getSession();	
		DateFormat simpleDateFormat = new SimpleDateFormat("yyyy-mm-dd");
		
		// 예약취소 테이블 insert
		try {
			rcdto.setU_id((String)session.getAttribute("u_id"));
			rcdto.setRes_number(res_number);
			rcdto.setRes_checkin(simpleDateFormat.parse(req.getParameter("res_checkin")));
			rcdto.setRes_checkin(simpleDateFormat.parse(req.getParameter("res_checkout")));
			rcdto.setRes_rtype(req.getParameter("res_rtype"));
			rcdto.setRes_price(Integer.parseInt(req.getParameter("res_price")));
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
		
		
//		if(rdao.res_delete(res_number)) {
//			forward.setRedirect(false);
//			forward.setPath(req.getContextPath() + );
//		}
		
		return forward;
	}
	 
}
